
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Repaso a los servicios PaaS que ofrece AWS para gestionar los datos, centrándonos tanto en DynamoDB como sistema NoSQL.">
      
      
      
        <link rel="canonical" href="https://aitor-medrano.github.io/iabd/cloud/dynamodb.html">
      
      
        <link rel="prev" href="rds.html">
      
      
        <link rel="next" href="waf.html">
      
      
      <link rel="icon" href="../favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.1">
    
    
      
        <title>Gestión de datos documentales mediante DynamoDB en AWS. - Inteligencia Artificial y Big Data</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.45e1311d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-VKM8BDY6KT"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-VKM8BDY6KT",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-VKM8BDY6KT",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Gestión de datos documentales mediante DynamoDB en AWS. - Inteligencia Artificial y Big Data" >
      
        <meta  property="og:description"  content="Repaso a los servicios PaaS que ofrece AWS para gestionar los datos, centrándonos tanto en DynamoDB como sistema NoSQL." >
      
        <meta  property="og:image"  content="https://aitor-medrano.github.io/iabd/assets/images/social/cloud/dynamodb.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://aitor-medrano.github.io/iabd/cloud/dynamodb.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Gestión de datos documentales mediante DynamoDB en AWS. - Inteligencia Artificial y Big Data" >
      
        <meta  name="twitter:description"  content="Repaso a los servicios PaaS que ofrece AWS para gestionar los datos, centrándonos tanto en DynamoDB como sistema NoSQL." >
      
        <meta  name="twitter:image"  content="https://aitor-medrano.github.io/iabd/assets/images/social/cloud/dynamodb.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduccion" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../index.html" title="Inteligencia Artificial y Big Data" class="md-header__button md-logo" aria-label="Inteligencia Artificial y Big Data" data-md-component="logo">
      
  <img src="../images/logoIABD3.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Inteligencia Artificial y Big Data
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gestión de datos documentales mediante DynamoDB en AWS.
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Inteligencia Artificial y Big Data" class="md-nav__button md-logo" aria-label="Inteligencia Artificial y Big Data" data-md-component="logo">
      
  <img src="../images/logoIABD3.png" alt="logo">

    </a>
    Inteligencia Artificial y Big Data
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../2324.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Planning 23/24
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NoSQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            NoSQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/nosql.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Almacenamiento de datos. NoSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/mongo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/modelado.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modelado documental
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/agregaciones.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agregaciones en MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/rendimiento.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rendimiento
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recién añadido">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/replicacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Replicación y particionado
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/pymongo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB y Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa/series-temporales.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Series temporales
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recién añadido">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cloud
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cloud
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cloud.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="aws.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="s3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ec2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EC2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="lambda.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lambda
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recién añadido">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rds.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RDS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    DynamoDB
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="dynamodb.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    DynamoDB
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#componentes-y-particiones" class="md-nav__link">
    <span class="md-ellipsis">
      Componentes y particiones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Componentes y particiones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Tipos de datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infraestructura" class="md-nav__link">
    <span class="md-ellipsis">
      Infraestructura
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Infraestructura">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#costes" class="md-nav__link">
    <span class="md-ellipsis">
      Costes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hola-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Hola DynamoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hola DynamoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creando-una-tabla" class="md-nav__link">
    <span class="md-ellipsis">
      Creando una tabla
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cargando-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Cargando datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-1-cargar-datos-en-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 1: Cargar datos en DynamoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caso de uso 1: Cargar datos en DynamoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modificando-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Modificando datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#borrando-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Borrando datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-2-consultar-datos-en-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 2 - Consultar datos en DynamoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caso de uso 2 - Consultar datos en DynamoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#un-documento-por-la-clave" class="md-nav__link">
    <span class="md-ellipsis">
      Un documento por la clave
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#varios-documentos" class="md-nav__link">
    <span class="md-ellipsis">
      Varios documentos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Full scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consultas-mediante-el-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Consultas mediante el CLI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-3-de-s3-a-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 3 - De S3 a DynamoDB
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-4-desde-rds" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 4 - Desde RDS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caso de uso 4 - Desde RDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mariadbmysql-y-python" class="md-nav__link">
    <span class="md-ellipsis">
      MariaDB/MySQL y Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#de-rds-a-s3" class="md-nav__link">
    <span class="md-ellipsis">
      De RDS a S3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#de-rds-a-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      De RDS a DynamoDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    <span class="md-ellipsis">
      Referencias
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#actividades" class="md-nav__link">
    <span class="md-ellipsis">
      Actividades
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="waf.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WAF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="escalado.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitorización y Escalado
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="athena.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Athena
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="emr.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EMR
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ingeniería de Datos
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Ingeniería de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/bigdata.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Big Data
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recién añadido">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/de.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ingeniería de datos
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recién añadido">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/arq.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arquitecturas Big Data
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/etl.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ingesta de datos
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/pentaho.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pentaho
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/formatos.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Formatos de datos
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../de/faker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Faker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ecosistema Hadoop
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Ecosistema Hadoop
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hadoop/hadoop.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hadoop
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hadoop/hdfs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hadoop/sqoop.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sqoop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hadoop/flume.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flume
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hadoop/hive1.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hive I
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hadoop/hive2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hive II
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recién añadido">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Spark
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Spark
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/spark.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ecosistema Spark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/rdd.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RDD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/dataframeAPI.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataFrames API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/agregaciones.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agregaciones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/catalog.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spark JDBC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/deltalake.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delta Lake
  </span>
  
    
  
  
    <span class="md-status md-status--updated" title="Modificado">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/streaming.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming I
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spark/join-window.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming II
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../dataflow/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Flujo de datos
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Flujo de datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataflow/nifi1.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nifi I
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataflow/nifi2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nifi II
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataflow/kafka1.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka I
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataflow/kafka2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka II
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataflow/airflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../pia/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    PIA
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            PIA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lara 22/23
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Lara 22/23
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/01presentacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presentación
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/02requisitos.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prototipado
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/03visitaVK.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visita IES Victoria Kent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/04almacenamiento.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Almacenamiento datos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/05audio.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Almacenamiento audio
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" >
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lara 23/24
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            Lara 23/24
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/21conociendo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conociendo Lara
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/22captura.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Capturando audios
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4" >
        
          
          <label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Autoponic 22/23
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4">
            <span class="md-nav__icon md-icon"></span>
            Autoponic 22/23
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/06autoponic.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presentación
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/07navarrosantafe.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visita IES Navarro Santafé
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/08timeseries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Almacenamiento datos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/09powerbi.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualización
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_5" >
        
          
          <label class="md-nav__link" for="__nav_9_5" id="__nav_9_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Autoponic 23/24
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_5">
            <span class="md-nav__icon md-icon"></span>
            Autoponic 23/24
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/23autoponic.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conociendo Autoponic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/24nodered.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node-RED
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/25villena.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visita IES Navarro Santafé
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pia/26modelo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modelo de datos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tags.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tags
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../blog/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2" >
        
          
          <label class="md-nav__link" for="__nav_11_2" id="__nav_11_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archivo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2">
            <span class="md-nav__icon md-icon"></span>
            Archivo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/archive/2024.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/archive/2023.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3" >
        
          
          <label class="md-nav__link" for="__nav_11_3" id="__nav_11_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categorías
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_3">
            <span class="md-nav__icon md-icon"></span>
            Categorías
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/2023.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/2024.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/diciembre.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diciembre
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/enero.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enero
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/noticias.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Noticias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/noviembre.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Noviembre
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/octubre.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Octubre
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/category/septiembre.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Septiembre
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#componentes-y-particiones" class="md-nav__link">
    <span class="md-ellipsis">
      Componentes y particiones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Componentes y particiones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Tipos de datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infraestructura" class="md-nav__link">
    <span class="md-ellipsis">
      Infraestructura
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Infraestructura">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#costes" class="md-nav__link">
    <span class="md-ellipsis">
      Costes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hola-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Hola DynamoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hola DynamoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creando-una-tabla" class="md-nav__link">
    <span class="md-ellipsis">
      Creando una tabla
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cargando-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Cargando datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-1-cargar-datos-en-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 1: Cargar datos en DynamoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caso de uso 1: Cargar datos en DynamoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modificando-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Modificando datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#borrando-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Borrando datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-2-consultar-datos-en-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 2 - Consultar datos en DynamoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caso de uso 2 - Consultar datos en DynamoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#un-documento-por-la-clave" class="md-nav__link">
    <span class="md-ellipsis">
      Un documento por la clave
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#varios-documentos" class="md-nav__link">
    <span class="md-ellipsis">
      Varios documentos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Full scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consultas-mediante-el-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Consultas mediante el CLI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-3-de-s3-a-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 3 - De S3 a DynamoDB
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-de-uso-4-desde-rds" class="md-nav__link">
    <span class="md-ellipsis">
      Caso de uso 4 - Desde RDS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caso de uso 4 - Desde RDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mariadbmysql-y-python" class="md-nav__link">
    <span class="md-ellipsis">
      MariaDB/MySQL y Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#de-rds-a-s3" class="md-nav__link">
    <span class="md-ellipsis">
      De RDS a S3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#de-rds-a-dynamodb" class="md-nav__link">
    <span class="md-ellipsis">
      De RDS a DynamoDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    <span class="md-ellipsis">
      Referencias
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#actividades" class="md-nav__link">
    <span class="md-ellipsis">
      Actividades
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
    
      <a href="../tags.html#cloud" class="md-tag">Cloud</a>
    
  
    
    
    
      <a href="../tags.html#aws" class="md-tag">AWS</a>
    
  
    
    
    
      <a href="../tags.html#nosql" class="md-tag">NoSQL</a>
    
  
    
    
    
      <a href="../tags.html#bda-ra2" class="md-tag">BDA RA2</a>
    
  
</nav>



  <h1>DynamoDB</h1>

<h2 id="introduccion">Introducción<a class="headerlink" href="#introduccion" title="Permanent link">&para;</a></h2>
<p><em>DynamoDB</em> (<a href="https://aws.amazon.com/es/dynamodb/">https://aws.amazon.com/es/dynamodb/</a>) es un servicio administrado de base de datos NoSQL clave-valor y documental, rápido y flexible para todas las aplicaciones que requieren una latencia uniforme de un solo dígito de milisegundos a cualquier escala y una capacidad de almacenamiento prácticamente ilimitado.</p>
<p>Así pues, es un almacén de claves/valor (similar a <a href="https://redis.io/">Redis</a> y <a href="https://www.mongodb.com/es">MongoDB</a> a la vez), flexible y sin estructura fija (los elementos pueden tener atributos diferentes), diseñado para garantizar un determinado rendimiento y disponibilidad para cada tabla (en NoSQL suele haber pocas tablas), es decir, se definen elementos por tabla y se paga según lo exigido en cada una.</p>
<h2 id="componentes-y-particiones">Componentes y particiones<a class="headerlink" href="#componentes-y-particiones" title="Permanent link">&para;</a></h2>
<p>Los componentes principales son:</p>
<ul>
<li>las <strong>tablas</strong>: son conjuntos de datos, formada por los elementos.</li>
<li>los <strong>elementos</strong>: grupo de atributos que pueden identificar de forma exclusiva a un registro.</li>
<li>los <strong>atributos</strong>: elementos de datos fundamental que no es preciso seguir dividiendo.</li>
</ul>
<p><em>DynamoDB</em> soporta dos tipos de claves principales:</p>
<ul>
<li>La <strong>clave de partición</strong> es una clave principal simple.</li>
<li>La <strong>clave de partición y de ordenamiento</strong>, también conocidas como clave principal compuesta, ya que está formada por dos atributos.</li>
</ul>
<figure style="align: center;">
    <img src="images/06ddb-claves.png" width="600">
    <figcaption>Claves</figcaption>
</figure>

<p>A medida que aumenta el volumen de datos, la clave principal particiona e indexa los datos de la tabla. Podemos recuperar los datos de una tabla de <em>DynamoDB</em> de dos formas distintas, bien por la clave y hacer una consulta directa, o utilizar un escaneo de todos los elementos en busca de aquello que coincida con el parámetro de búsqueda.</p>
<figure style="align: center;">
    <img src="images/06ddb-particiones.png" width="600">
    <figcaption>Consultas por clave o escaneo</figcaption>
</figure>

<p>Para aprovechar al máximo las operaciones de consulta, es importante que la clave utilizada identifique de forma unívoca los elementos de la tabla de <em>DynamoDB</em>, ya que se crea automáticamente un índice desordenado sobre dicha clave. Podemos configurar una clave principal simple basada en un único atributo de los valores de los datos con una distribución uniforme. De forma alternativa, podemos especificar una clave compuesta, que incluye una clave de partición y una clave secundaria, lo que implica que AWS cree dos índices, uno desordenado para la clave principal y otro índice ordenado para la clave secundaria.</p>
<p>Además, <em>DynamoDB</em> permite crear índices para optimizar las consultas que realicemos sobre atributos que no forman parte de la clave de partición u ordenamiento.</p>
<h3 id="tipos-de-datos">Tipos de datos<a class="headerlink" href="#tipos-de-datos" title="Permanent link">&para;</a></h3>
<p>Respecto a los esquemas, como sistema NoSQL, cada elemento de una tabla puede contener un número arbitrario de atributos (con un nombre y un valor) con diferentes <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.NamingRulesDataTypes.html#HowItWorks.DataTypes">tipos de valores</a>, pudiendo ser:</p>
<ul>
<li>escalares: numérico (<code>N</code>), cadena (<code>S</code>), binario (<code>B</code>), booleano (<code>BOOL</code>) y nulo (<code>NULL</code>)</li>
<li>compuestos: conjunto de cadenas (<code>SS</code>), conjuntos numéricos (<code>NS</code>) y conjuntos binarios (<code>BS</code>)</li>
<li>basados en documentos: listas (<code>L</code> y mediante corchetes <code>[]</code>) y mapas (mediante llaves <code>{}</code>)</li>
</ul>
<p>Cada elemento de una tabla no puede superar los 400KB.</p>
<h2 id="infraestructura">Infraestructura<a class="headerlink" href="#infraestructura" title="Permanent link">&para;</a></h2>
<p>AWS administra toda la infraestructura subyacente de datos y los almacena de manera redundante en varias instalaciones dentro de una región, como parte de la arquitectura tolerante a errores.</p>
<p>El sistema particiona los datos automáticamente, distribuyéndolos entre diferentes dispositivos de almacenamiento. No existe ningún límite práctico respecto la cantidad de elementos que se pueden almacenar en una tabla. Por ejemplo, algunos clientes tienen tablas de producción con miles de millones de elementos.</p>
<p>Todos los datos de <em>DynamoDB</em> se almacenan en unidades SSD, y su lenguaje de consulta simple (<a href="https://partiql.org/">PartiQL</a>) permite un rendimiento de las consultas uniforme y de baja latencia. Además de escalar el almacenamiento, <em>DynamoDB</em> permite aprovisionar el volumen del rendimiento de lectura o escritura que necesita para cada tabla.</p>
<p>También facilita el escalado automático, monitorizando la carga de la tabla e incrementando o disminuyendo el rendimiento aprovisionado de manera automática. Otras características clave son las tablas globales que permiten generar réplicas de manera automática en las regiones de AWS que elijamos, el cifrado en reposo y la visibilidad del tiempo de vida (TTL) de los elementos.</p>
<h3 id="costes">Costes<a class="headerlink" href="#costes" title="Permanent link">&para;</a></h3>
<p>Con <em>DynamoDB</em> se cobran las operaciones de lectura, escritura y almacenamiento de datos en sus tablas, junto con las características opcionales que decidamos habilitar. Ofrece dos modos de capacidad con opciones de facturación:</p>
<ul>
<li>
<p><a href="https://aws.amazon.com/es/dynamodb/pricing/on-demand/">Bajo demanda</a>: se cobran las operaciones de lectura y escritura de datos realizada en las tablas. No necesitamos especificar el rendimiento de lectura y escritura que espera de nuestras aplicaciones. Apropiado cuando:</p>
<ul>
<li>Creamos nuevas tablas con cargas de trabajo desconocidas.</li>
<li>El tráfico de la aplicación es impredecible.</li>
</ul>
</li>
<li>
<p><a href="https://aws.amazon.com/es/dynamodb/pricing/provisioned/">Aprovisionada</a>: se configura el número de operaciones de lectura y escritura por segundo que consideramos que necesitará nuestra aplicación. Permite usar el escalado automático para ajustar automáticamente la capacidad de la tabla en función de la tasa de uso especificada. Apropiado cuando:</p>
<ul>
<li>El tráfico de la aplicación es predecible.</li>
<li>Las aplicaciones tienen un tráfico uniforme o aumenta gradualmente.</li>
<li>Los requisitos de capacidad se pueden predecir para controlar los costos</li>
</ul>
</li>
</ul>
<p>Por ejemplo, una tabla donde especificamos un rendimiento garantizado de 1000 millones lecturas y 1 millón de escrituras al mes, con una coherencia eventual (es decir, que permite desorden de peticiones) nos costará $67,17 al mes.</p>
<h2 id="hola-dynamodb">Hola DynamoDB<a class="headerlink" href="#hola-dynamodb" title="Permanent link">&para;</a></h2>
<p>A continuación vamos a crear un ejemplo donde tras crear una tabla, la cargaremos con datos para posteriormente realizar alguna consulta.</p>
<p>Supongamos que tenemos datos relativos a un catálogo de productos, almacenados en el archivo <a href="resources/ProductCatalog.json">ProductCatalog.json</a>, el cual queremos poder consultar.</p>
<p>Si visualizamos el primer registro podemos observar su estructura, la cual es específica de <em>DynamoDB</em>, ya que indica en el primer elemento el nombre de la tabla (en nuestro caso <code>ProductCatalog</code>), y a continuación el tipo de operación (<code>PutRequest</code>):</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">{</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="nt">&quot;ProductCatalog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="w">        </span><span class="p">{</span>
<span class="hll"><span class="linenos" data-linenos=" 4 "></span><span class="w">            </span><span class="nt">&quot;PutRequest&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos" data-linenos=" 5 "></span><span class="w">                </span><span class="nt">&quot;Item&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">                    </span><span class="nt">&quot;Id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (1)!</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">                        </span><span class="nt">&quot;N&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;101&quot;</span><span class="w">  </span><span class="c1">// (2)!</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">                    </span><span class="nt">&quot;Title&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="w">                        </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Book 101 Title&quot;</span>
<span class="linenos" data-linenos="11 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="12 "></span><span class="w">                    </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="13 "></span><span class="w">                        </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;111-1111111111&quot;</span>
<span class="linenos" data-linenos="14 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="15 "></span><span class="w">                    </span><span class="nt">&quot;Authors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="16 "></span><span class="w">                        </span><span class="nt">&quot;L&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">  </span><span class="c1">// (3)!</span>
<span class="linenos" data-linenos="17 "></span><span class="w">                            </span><span class="p">{</span>
<span class="linenos" data-linenos="18 "></span><span class="w">                                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Author1&quot;</span>
<span class="linenos" data-linenos="19 "></span><span class="w">                            </span><span class="p">}</span>
<span class="linenos" data-linenos="20 "></span><span class="w">                        </span><span class="p">]</span>
<span class="linenos" data-linenos="21 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="22 "></span><span class="w">                    </span><span class="nt">&quot;Price&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="23 "></span><span class="w">                        </span><span class="nt">&quot;N&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="linenos" data-linenos="24 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="25 "></span><span class="w">                    </span><span class="nt">&quot;Dimensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="26 "></span><span class="w">                        </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8.5 x 11.0 x 0.5&quot;</span>
<span class="linenos" data-linenos="27 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="28 "></span><span class="w">                    </span><span class="nt">&quot;PageCount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="29 "></span><span class="w">                        </span><span class="nt">&quot;N&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;500&quot;</span>
<span class="linenos" data-linenos="30 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="31 "></span><span class="w">                    </span><span class="nt">&quot;InPublication&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="32 "></span><span class="w">                        </span><span class="nt">&quot;BOOL&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos" data-linenos="33 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="34 "></span><span class="w">                    </span><span class="nt">&quot;ProductCategory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="35 "></span><span class="w">                        </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Book&quot;</span>
<span class="linenos" data-linenos="36 "></span><span class="w">                    </span><span class="p">}</span>
<span class="linenos" data-linenos="37 "></span><span class="w">                </span><span class="p">}</span>
<span class="linenos" data-linenos="38 "></span><span class="w">            </span><span class="p">}</span>
<span class="linenos" data-linenos="39 "></span><span class="w">        </span><span class="p">},</span>
</code></pre></div>
<ol>
<li>Nombre del campo</li>
<li>Tipo  (<code>N</code>, numérico) y valor (<code>101</code>)</li>
<li>Campo de tipo lista</li>
</ol>
<h3 id="creando-una-tabla">Creando una tabla<a class="headerlink" href="#creando-una-tabla" title="Permanent link">&para;</a></h3>
<p>Para ello, primero vamos a crear la tabla desde el interfaz web de AWS. Tras seleccionar <em>Amazon DynamoDB</em>, creamos una tabla que llamamos <code>ProductCatalog</code>, cuyo identificador será <code>Id</code> de tipo <em>número</em>. El resto de campos se crearán automáticamente al importar los datos.</p>
<figure style="align: center;">
    <img src="images/06ddb-createTable.png" width="600">
    <figcaption>Creando la tabla</figcaption>
</figure>

<p>También podíamos haber creado la tabla mediante el comando <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/create-table.html">create-table</a> de AWS CLI:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>create-table<span class="w"> </span><span class="se">\</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span>--table-name<span class="w"> </span>ProductCatalog<span class="w"> </span><span class="se">\ </span><span class="c1"># (1)!</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span>--attribute-definitions<span class="w"> </span><span class="nv">AttributeName</span><span class="o">=</span>Id,AttributeType<span class="o">=</span>N<span class="w">  </span><span class="se">\ </span><span class="c1"># (2)!</span>
<span class="linenos" data-linenos="4 "></span><span class="w">    </span>--key-schema<span class="w"> </span><span class="nv">AttributeName</span><span class="o">=</span>Id,KeyType<span class="o">=</span>HASH<span class="w"> </span><span class="se">\ </span><span class="c1"># (3)!</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span>--billing-mode<span class="w"> </span>PAY_PER_REQUEST
</code></pre></div>
<ol>
<li>Nombre de la tabla</li>
<li>Pondremos tantas parejas de <code>AttributeName, AttributeType</code> como atributos tenga la clave, </li>
<li>Para los atributos recién definidos indicamos sus tipos, que puedes ser <code>HASH</code>, para la clave de particionado o <code>RANGE</code> para la de ordenación.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Nombre de las tablas</p>
<p>En <em>DynamoDB</em> no hay concepto de base de datos, por lo tanto, todas las tablas conviven en el mismo espacio de nombres. Un buena práctica de uso es anteponer un prefijo a todas las tablas relacionadas por aplicación, por ejemplo, <code>s8a-ProductCatalog</code>.</p>
</div>
<p>Si queremos comprobar qué tablas tenemos creadas podemos utilizar el comando <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/list-tables.html">list-tables</a> de AWS CLI:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>list-tables
</code></pre></div>
<h3 id="cargando-datos">Cargando datos<a class="headerlink" href="#cargando-datos" title="Permanent link">&para;</a></h3>
<p>Para introducir los datos, podemos hacerlo de varias maneras.</p>
<ul>
<li>Si pulsamos sobra la tabla y luego en elementos podemos rellenar un formulario indicando el tipo de los elementos y su valor.</li>
<li>
<p>Otra manera más ágil es mediante AWS CLI (recordad antes configurar las <a href="aws.html#variablesEntorno">variables de entorno</a> con la información de la conexión):</p>
<p>El comando <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/batch-write-item.html">batch-write-item</a> permite importar los datos desde un archivo JSON siempre y cuando cumpla con el formato comentado anteriormente.</p>
<p>Así pues, el comando sería:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>batch-write-item<span class="w"> </span>--request-items<span class="w"> </span>file://ProductCatalog.json
</code></pre></div>
<p>Una vez ejecutado tendremos un mensaje de <code>UnprocessedItems: {}</code>.</p>
</li>
<li>
<p>También podemos cargar los datos en S3, y realizar una <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/S3DataImport.HowItWorks.html">importación desde S3</a>, pero el formato del documento es diferente, admitiendo datos en CSV, un formato de JSON multilínea específico de DynamoDB (compuestos de documentos <code>Item</code>) o un formato propietario como <a href="https://amzn.github.io/ion-docs/">Amazon Ion</a>. Así pues, primero cargaremos <a href="resources/ProductCatalogS3.json">ProductCatalogS3.json</a> en S3, y a continuación realizamos la importación.</p>
<p><figure style="align: center;">
    <img src="images/06ddb-import-s3.png" width="600">
    <figcaption>Importación en DynamoDB desde S3</figcaption>
</figure></p>
<p>Tras indicar el archivo, deberemos indicar los datos de creación de la nueva tabla (es decir, no permite importar datos sobre una tabla ya existente previamente).</p>
</li>
</ul>
<p>Si volvemos a la consola web, tras entrar en la tabla y pulsar en <em>Ver elementos</em> veremos los datos ya introducidos.</p>
<figure style="align: center;">
    <img src="images/06ddb-elementos.png" width="600">
    <figcaption>Ver elementos</figcaption>
</figure>

<p>Si queremos consultar información de la tabla mediante el comando <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/describe-table.html">describe-table</a> de AWS CLI, ejecutaremos:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>describe-table<span class="w"> </span>--table-name<span class="w"> </span>ProductCatalog
</code></pre></div>
<p>Si queremos hacer la consulta de la tabla para ver los datos que contiene desde el comando <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/scan.html">scan</a> de AWS CLI, ejecutaremos:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>scan<span class="w"> </span>--table-name<span class="w"> </span>ProductCatalog
</code></pre></div>
<p>Y veremos algo similar a:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="nt">&quot;Items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">        </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">            </span><span class="nt">&quot;Title&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;18-Bike-204&quot;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">            </span><span class="nt">&quot;Price&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">                </span><span class="nt">&quot;N&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;500&quot;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="10 "></span><span class="w">            </span><span class="nt">&quot;Brand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="11 "></span><span class="w">                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Brand-Company C&quot;</span>
<span class="linenos" data-linenos="12 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="13 "></span><span class="w">            </span><span class="nt">&quot;Description&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="14 "></span><span class="w">                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;205 Description&quot;</span>
<span class="linenos" data-linenos="15 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="16 "></span><span class="w">            </span><span class="nt">&quot;Color&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="17 "></span><span class="w">                </span><span class="nt">&quot;L&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos="18 "></span><span class="w">                    </span><span class="p">{</span>
<span class="linenos" data-linenos="19 "></span><span class="w">                        </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Red&quot;</span>
<span class="linenos" data-linenos="20 "></span><span class="w">                    </span><span class="p">},</span>
<span class="linenos" data-linenos="21 "></span><span class="w">                    </span><span class="p">{</span>
<span class="linenos" data-linenos="22 "></span><span class="w">                        </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Black&quot;</span>
<span class="linenos" data-linenos="23 "></span><span class="w">                    </span><span class="p">}</span>
<span class="linenos" data-linenos="24 "></span><span class="w">                </span><span class="p">]</span>
<span class="linenos" data-linenos="25 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="26 "></span><span class="w">            </span><span class="nt">&quot;ProductCategory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="27 "></span><span class="w">                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bicycle&quot;</span>
<span class="linenos" data-linenos="28 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="29 "></span><span class="w">            </span><span class="nt">&quot;Id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="30 "></span><span class="w">                </span><span class="nt">&quot;N&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;205&quot;</span>
<span class="linenos" data-linenos="31 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="32 "></span><span class="w">            </span><span class="nt">&quot;BicycleType&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="33 "></span><span class="w">                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hybrid&quot;</span>
</code></pre></div>
<p>Como se puede observar, los datos salen desordenados.</p>
<p>Vamos a realizar consultas sobre estos datos haciendo uso de <em>PartiQL</em>. Así pues, en el menú de la izquierda, seleccionamos el editor <em>PartiQL</em>.</p>
<figure style="align: center;">
    <img src="images/06ddb-partiQL.png">
    <figcaption>Consultas con PartiQL</figcaption>
</figure>

<p>En el panel de la derecha podremos realizar consultas del tipo:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">ProductCatalog</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">101</span>
<span class="linenos" data-linenos="2 "></span><span class="k">select</span><span class="w"> </span><span class="n">Title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">ProductCatalog</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ProductCategory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Book&#39;</span>
<span class="linenos" data-linenos="3 "></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">ProductCatalog</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">300</span>
</code></pre></div>
<h2 id="caso-de-uso-1-cargar-datos-en-dynamodb">Caso de uso 1: Cargar datos en DynamoDB<a class="headerlink" href="#caso-de-uso-1-cargar-datos-en-dynamodb" title="Permanent link">&para;</a></h2>
<p>Vamos a cargar un listado de películas en <em>DynamoDB</em>. El primer paso es elegir las claves de particionado y ordenación. El archivo <a href="resources/datosPeliculas.json">datosPeliculas.json</a> contiene el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">[</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">        </span><span class="nt">&quot;year&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2013</span><span class="p">,</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Rush&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">        </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">            </span><span class="nt">&quot;directors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Ron Howard&quot;</span><span class="p">],</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">            </span><span class="nt">&quot;release_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2013-09-02T00:00:00Z&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">            </span><span class="nt">&quot;rating&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">8.3</span><span class="p">,</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">            </span><span class="nt">&quot;genres&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos="10 "></span><span class="w">                </span><span class="s2">&quot;Action&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="11 "></span><span class="w">                </span><span class="s2">&quot;Biography&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="12 "></span><span class="w">                </span><span class="s2">&quot;Drama&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="13 "></span><span class="w">                </span><span class="s2">&quot;Sport&quot;</span>
<span class="linenos" data-linenos="14 "></span><span class="w">            </span><span class="p">],</span>
<span class="linenos" data-linenos="15 "></span><span class="w">            </span><span class="nt">&quot;image_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://ia.media-imdb.com/images/M/MV5BMTQyMDE0MTY0OV5BMl5BanBnXkFtZTcwMjI2OTI0OQ@@._V1_SX400_.jpg&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="16 "></span><span class="w">            </span><span class="nt">&quot;plot&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A re-creation of the merciless 1970s rivalry between Formula One rivals James Hunt and Niki Lauda.&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="17 "></span><span class="w">            </span><span class="nt">&quot;rank&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="linenos" data-linenos="18 "></span><span class="w">            </span><span class="nt">&quot;running_time_secs&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7380</span><span class="p">,</span>
<span class="linenos" data-linenos="19 "></span><span class="w">            </span><span class="nt">&quot;actors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos="20 "></span><span class="w">                </span><span class="s2">&quot;Daniel Bruhl&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="21 "></span><span class="w">                </span><span class="s2">&quot;Chris Hemsworth&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="22 "></span><span class="w">                </span><span class="s2">&quot;Olivia Wilde&quot;</span>
<span class="linenos" data-linenos="23 "></span><span class="w">            </span><span class="p">]</span>
<span class="linenos" data-linenos="24 "></span><span class="w">        </span><span class="p">}</span>
<span class="linenos" data-linenos="25 "></span><span class="w">    </span><span class="p">},</span>
<span class="linenos" data-linenos="26 "></span><span class="p">]</span>
</code></pre></div>
<p>Como los años de las películas permiten particionar de manera más o menos equilibrada los datos, en la mejor candidata para clave de particionado. Como sí que habrá varias películas en el mismo año, elegimos el título como clave de ordenación, provocando que los documentos tengan una clave compuesta.</p>
<p>Así pues, vamos a nombrar nuestra tabla como <code>SeveroPeliculas</code> y ponemos como clave de partición el atributo <code>year</code> de tipo numérico, y como clave de ordenación <code>title</code> de tipo cadena.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Creación mediante la consola</label><label for="__tabbed_1_2">Creación mediante AWS CLI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><figure style="align: center;">
    <img src="images/06ddCrearTabla.png" alt="Creación de la tabla SeveroPeliculas" width="600px">
    <figcaption>Creación de la tabla SeveroPeliculas</figcaption>
</figure></p>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>create-table<span class="w"> </span><span class="se">\</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span>--table-name<span class="w"> </span>SeveroPeliculas<span class="w"> </span><span class="se">\</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span>--attribute-definitions<span class="w"> </span><span class="nv">AttributeName</span><span class="o">=</span>year,AttributeType<span class="o">=</span>N<span class="w"> </span><span class="nv">AttributeName</span><span class="o">=</span>title,AttributeType<span class="o">=</span>S<span class="w">  </span><span class="se">\</span>
<span class="linenos" data-linenos="4 "></span><span class="w">    </span>--key-schema<span class="w"> </span><span class="nv">AttributeName</span><span class="o">=</span>year,KeyType<span class="o">=</span>HASH<span class="w"> </span><span class="nv">AttributeName</span><span class="o">=</span>title,KeyType<span class="o">=</span>RANGE<span class="w"> </span><span class="se">\</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span>--billing-mode<span class="w"> </span>PAY_PER_REQUEST
</code></pre></div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Interacción con Python</p>
<p>Para acceder a <em>DynamoDB</em> desde <em>Python</em>, del mismo modo que con S3, haremos uso de la librería <em>boto3</em>.</p>
<p>Recuerda crear un entorno virtual e instalar la librería:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>$<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="linenos" data-linenos="2 "></span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>venv/bin/activate
<span class="linenos" data-linenos="3 "></span><span class="o">(</span>venv<span class="o">)</span><span class="w"> </span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>boto3
</code></pre></div>
</div>
<p>Para <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.WritingData">insertar datos en una tabla</a>, usaremos el método <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/put_item.html">put_item</a>, el cual crea un nuevo registro o lo sustituye si encuentra uno con la misma clave.</p>
<p>Así pues, una vez creada la tabla, vamos a ver cómo podemos cargar los datos. Haciendo uso de la librería <em>boto3</em> vamos a crear el archivo <code>cargarDatosPeliculas.py</code>:</p>
<div class="highlight"><span class="filename">cargarDatosPeliculas.py</span><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">json</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">import</span> <span class="nn">decimal</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="hll"><span class="linenos" data-linenos=" 5 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span> <span class="c1"># (1)!</span>
</span><span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;datosPeliculas.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ficheroJSON</span><span class="p">:</span>
<span class="linenos" data-linenos="10 "></span>    <span class="n">peliculas</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ficheroJSON</span><span class="p">,</span> <span class="n">parse_float</span><span class="o">=</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span>    <span class="k">for</span> <span class="n">pelicula</span> <span class="ow">in</span> <span class="n">peliculas</span><span class="p">:</span>
<span class="linenos" data-linenos="12 "></span>        <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pelicula</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">])</span>
<span class="linenos" data-linenos="13 "></span>        <span class="n">title</span> <span class="o">=</span> <span class="n">pelicula</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="14 "></span>        <span class="n">info</span> <span class="o">=</span> <span class="n">pelicula</span><span class="p">[</span><span class="s1">&#39;info&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Añadida película:&quot;</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
<span class="linenos" data-linenos="17 "></span>
<span class="hll"><span class="linenos" data-linenos="18 "></span>        <span class="n">tabla</span><span class="o">.</span><span class="n">put_item</span><span class="p">(</span>  <span class="c1"># (2)!</span>
</span><span class="linenos" data-linenos="19 "></span>            <span class="n">Item</span><span class="o">=</span><span class="p">{</span>
<span class="linenos" data-linenos="20 "></span>                <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
<span class="linenos" data-linenos="21 "></span>                <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
<span class="linenos" data-linenos="22 "></span>                <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">,</span>
<span class="linenos" data-linenos="23 "></span>            <span class="p">}</span>
<span class="linenos" data-linenos="24 "></span>        <span class="p">)</span>
</code></pre></div>
<ol>
<li>Nos conectamos a la región e indicamos que vamos a utilizar el servicio de <em>DynamoDB</em></li>
<li>Insertamos un nuevo elemento, el cual pasamos como un documento JSON</li>
</ol>
<p>Si lo ejecutamos desde nuestro ordenador, nos aparecerá por la consola cada una de las películas insertadas.</p>
<p>Si a la hora de insertar los datos, queremos especificar el tipo de cada valor, podemos hacerlo anteponiendo a cada campo su tipo:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="n">tabla</span><span class="o">.</span><span class="n">put_item</span><span class="p">(</span>
<span class="linenos" data-linenos="2 "></span>    <span class="n">Item</span><span class="o">=</span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="n">year</span><span class="p">},</span>
<span class="linenos" data-linenos="4 "></span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">},</span>
<span class="linenos" data-linenos="5 "></span>        <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">},</span>
<span class="linenos" data-linenos="6 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="7 "></span><span class="p">)</span>
</code></pre></div>
<h3 id="modificando-datos">Modificando datos<a class="headerlink" href="#modificando-datos" title="Permanent link">&para;</a></h3>
<p>Ya hemos comentado, que si la clave coincide, la operación <code>put_item</code> sobrescribirá los datos. Pero, ¿y si unicamente queremos cambiar algunos campos?</p>
<p>Para ello, necesitamos modificar los datos haciendo uso de la operación <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/update_item.html"><code>update_item</code></a>:</p>
<div class="admonition inline end caution">
<p class="admonition-title">Float y boto3</p>
<p>Mucho cuidado con boto3 y <em>DynamoDB</em>, ya que los tipos <code>Float</code> no están soportados, y en cambio, hemos de utilizar el tipo <code>Decimal</code>.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="n">tabla</span><span class="o">.</span><span class="n">update_item</span><span class="p">(</span>
<span class="linenos" data-linenos="2 "></span>    <span class="n">Key</span><span class="o">=</span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2013</span><span class="p">,</span>
<span class="linenos" data-linenos="4 "></span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Rush&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="5 "></span>    <span class="p">},</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span>    <span class="n">UpdateExpression</span> <span class="o">=</span> <span class="s1">&#39;SET info.rating = :val1&#39;</span><span class="p">,</span>  <span class="c1"># (1)!</span>
<span class="linenos" data-linenos="8 "></span>    <span class="n">ExpressionAttributeValues</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;:val1&quot;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;9.9&quot;</span><span class="p">)</span> <span class="p">}</span> <span class="c1"># (2)!   </span>
<span class="linenos" data-linenos="9 "></span><span class="p">)</span>
</code></pre></div>
<ol>
<li>
<p>Mediante <code>UpdateExpression</code> podemos indicar una expresión: </p>
<ul>
<li><code>SET</code> para añadir un atributo, por ejemplo <code>SET attr1 = :attr1val</code>, <code>SET attr1 = attr2 + :attr2val</code>, <code>SET attr1 = :attr1val, attr2 = :attr2val</code></li>
<li><code>REMOVE</code> para eliminarlo, por ejemplo <code>REMOVE attr1</code>, <code>REMOVE attr1, attr2</code>.</li>
<li>todas las variables deben empezar por <code>:</code></li>
</ul>
</li>
<li>
<p>Mediante <code>ExpressionAttributeValues</code> le asignamos valores a las variables definidas en las  expresiones anteriores.</p>
</li>
</ol>
<p>Si queremos añadir más condiciones además de los elementos que forman la clave, hemos de añadir una <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html"><code>ConditionExpression</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="n">tabla</span><span class="o">.</span><span class="n">update_item</span><span class="p">(</span>
<span class="linenos" data-linenos="2 "></span>    <span class="n">Key</span><span class="o">=</span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2013</span><span class="p">,</span>
<span class="linenos" data-linenos="4 "></span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Rush&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="5 "></span>    <span class="p">},</span>
<span class="linenos" data-linenos="6 "></span>    <span class="n">UpdateExpression</span> <span class="o">=</span> <span class="s1">&#39;SET info.rating = :val1&#39;</span><span class="p">,</span>
<span class="hll"><span class="linenos" data-linenos="7 "></span>    <span class="n">ConditionExpression</span> <span class="o">=</span> <span class="s2">&quot;contains(info.genres, :gen) and (info.running_time_secs between :lo and :hi)&quot;</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span class="linenos" data-linenos="8 "></span>    <span class="n">ExpressionAttributeValues</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;:val1&quot;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;7.7&quot;</span><span class="p">),</span> <span class="s2">&quot;:gen&quot;</span><span class="p">:</span><span class="s2">&quot;Action&quot;</span><span class="p">,</span> <span class="s2">&quot;:lo&quot;</span><span class="p">:</span><span class="mi">7200</span><span class="p">,</span> <span class="s2">&quot;:hi&quot;</span><span class="p">:</span><span class="mi">7800</span> <span class="p">}</span>  <span class="c1"># (2)!</span>
<span class="linenos" data-linenos="9 "></span><span class="p">)</span>
</code></pre></div>
<ol>
<li>mediante <code>ConditionExpression</code> indicamos la expresión mediante diferentes <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.OperatorsAndFunctions.html">operadores y funciones</a></li>
<li>y repetimos <code>ExpressionAttributeValues</code> para indicar los valores tanto de la expresión de modificación como de la condición de filtrado.</li>
</ol>
<h3 id="borrando-datos">Borrando datos<a class="headerlink" href="#borrando-datos" title="Permanent link">&para;</a></h3>
<p>Finalmente, para eliminar registros, utilizaremos la operación <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/delete_item.html"><code>delete_item</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="n">tabla</span><span class="o">.</span><span class="n">delete_item</span><span class="p">(</span>
<span class="linenos" data-linenos="2 "></span>    <span class="n">Key</span><span class="o">=</span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2013</span><span class="p">,</span>
<span class="linenos" data-linenos="4 "></span>        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Rush&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="5 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="6 "></span><span class="p">)</span>
</code></pre></div>
<h2 id="caso-de-uso-2-consultar-datos-en-dynamodb">Caso de uso 2 - Consultar datos en DynamoDB<a class="headerlink" href="#caso-de-uso-2-consultar-datos-en-dynamodb" title="Permanent link">&para;</a></h2>
<p>Una vez tenemos nuestra tabla de <em>DynamoDB</em> cargada con datos, llega el momento de recuperar los datos, ya sea un registro en concreto o la posibilidad de realizar una consulta, ya sea por su índice o su clave de ordenación (o ambas).</p>
<p>En el apartado anterior hemos estudiado que podemos realizar consultas sobre <em>DynamoDB</em> haciendo uso de un subconjunto de SQL conocido como PartiQL. En los siguientes ejemplos vamos a mostrar cómo realizar las operaciones vía el API de <em>DynamoDb</em> y mediante <em>PartiQL</em>.</p>
<p>Para todas las consultas realizadas mediante PartiQL utilizaremos el método <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/execute_statement.html"><code>execute_statement</code></a>.</p>
<h3 id="un-documento-por-la-clave">Un documento por la clave<a class="headerlink" href="#un-documento-por-la-clave" title="Permanent link">&para;</a></h3>
<p>Cuando recuperemos documentos por su clave, utilizaremos el método <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/table/get_item.html"><code>get_item</code></a>, pásandole la <code>Key</code> con la clave para encontrar el documento y si queremos una <code>ProjectionExpression</code> para proyectar los resultados. Por ejemplo, si queremos recuperar la película <em>Interstellar</em> de 2014 haremos:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Mediante <code>get_item</code></label><label for="__tabbed_2_2">Mediante <code>get_item</code> con excepciones</label><label for="__tabbed_2_3">Mediante PartiQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">dynamodb_getitem.py</span><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 4 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Interstellar&quot;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="n">year</span> <span class="o">=</span> <span class="mi">2014</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="hll"><span class="linenos" data-linenos=" 9 "></span><span class="n">response</span> <span class="o">=</span> <span class="n">tabla</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span>
</span><span class="hll"><span class="linenos" data-linenos="10 "></span>        <span class="n">Key</span><span class="o">=</span><span class="p">{</span>
</span><span class="linenos" data-linenos="11 "></span>            <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
<span class="linenos" data-linenos="12 "></span>            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span>
<span class="linenos" data-linenos="13 "></span>        <span class="p">},</span>
<span class="hll"><span class="linenos" data-linenos="14 "></span>        <span class="n">ProjectionExpression</span><span class="o">=</span><span class="s2">&quot;title, info.plot&quot;</span><span class="p">)</span>
</span><span class="linenos" data-linenos="15 "></span><span class="n">item</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="16 "></span><span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">dynamodb_getitem_exc.py</span><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">from</span> <span class="nn">botocore.exceptions</span> <span class="kn">import</span> <span class="n">ClientError</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 5 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Interstellar&quot;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="n">year</span> <span class="o">=</span> <span class="mi">2014</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1"># Recupera una película</span>
<span class="linenos" data-linenos="11 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;------ Datos de Interstellar&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="12 "></span><span class="k">try</span><span class="p">:</span>
<span class="hll"><span class="linenos" data-linenos="13 "></span>    <span class="n">response</span> <span class="o">=</span> <span class="n">tabla</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span>
</span><span class="hll"><span class="linenos" data-linenos="14 "></span>        <span class="n">Key</span><span class="o">=</span><span class="p">{</span>
</span><span class="linenos" data-linenos="15 "></span>            <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
<span class="linenos" data-linenos="16 "></span>            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span>
<span class="linenos" data-linenos="17 "></span>        <span class="p">},</span>
<span class="hll"><span class="linenos" data-linenos="18 "></span>        <span class="n">ProjectionExpression</span><span class="o">=</span><span class="s2">&quot;title, info.plot&quot;</span>
</span><span class="linenos" data-linenos="19 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="20 "></span><span class="k">except</span> <span class="n">ClientError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos" data-linenos="21 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;Error&#39;</span><span class="p">][</span><span class="s1">&#39;Message&#39;</span><span class="p">])</span>
<span class="linenos" data-linenos="22 "></span><span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="23 "></span>    <span class="n">item</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="24 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">dynamodb_select.py</span><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="n">clientDDB</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1"># Recupera una película con PartiQL</span>
<span class="linenos" data-linenos=" 6 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;------ Datos de Interstellar mediante PartiQL&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos=" 7 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">clientDDB</span><span class="o">.</span><span class="n">execute_statement</span><span class="p">(</span>
</span><span class="linenos" data-linenos=" 8 "></span>    <span class="n">Statement</span><span class="o">=</span><span class="s2">&quot;SELECT title, info.plot FROM SeveroPeliculas WHERE year = 2014 and title=&#39;Interstellar&#39;&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 9 "></span><span class="n">item</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="10 "></span><span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Interstellar&quot;</span>
<span class="linenos" data-linenos="13 "></span><span class="n">year</span> <span class="o">=</span> <span class="mi">2014</span>
<span class="linenos" data-linenos="14 "></span><span class="c1"># Recupera una película con PartiQL con parámetros indicados mediante ?</span>
<span class="linenos" data-linenos="15 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;------ Datos de Interstellar mediante PartiQL con parámetros&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos="16 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">clientDDB</span><span class="o">.</span><span class="n">execute_statement</span><span class="p">(</span><span class="n">Statement</span><span class="o">=</span><span class="s1">&#39;SELECT * FROM SeveroPeliculas WHERE year = ? AND title = ?&#39;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos" data-linenos="17 "></span>                                    <span class="n">Parameters</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)},</span> <span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">}])</span>
</span><span class="linenos" data-linenos="18 "></span><span class="n">item</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="19 "></span><span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>En el caso de las <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/execute_statement.html">consultas mediante PartiQL haciendo uso de <code>execute_statement</code></a> conviene destacar que:</p>
<ul>
<li>Las consultas son <em>case sensitive</em>.</li>
<li>Los parámetros se indican mediante <code>?</code></li>
<li>Los contenidos de los parámetros se indican mediante una lista con un diccionario por cada parámetro donde la clave es el tipo del parámetro, y el valor es el dato a pasar (el dato se pasa siempre como un <code>string</code>)</li>
<li>Las consultas siempre devuelven un diccionario con una propiedad <code>Items</code> que contiene los resultados devueltos.</li>
</ul>
<p>Destacar que es diferente la estructura del resultado de realizar una consulta mediante el API de <em>DynamoDB</em> (respeta la estructura definida en la base de datos) o mediante <em>PartiQL</em> (crea un atributo por columna recuperada cuyo valor contiene el tipo del dato):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Resultado de <code>get-item</code></label><label for="__tabbed_3_2">Resultado de <em>PartiQL</em></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="err">&#39;i</span><span class="kc">nf</span><span class="err">o&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;plo</span><span class="kc">t</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;A</span><span class="w"> </span><span class="err">group</span><span class="w"> </span><span class="err">o</span><span class="kc">f</span><span class="w"> </span><span class="err">explorers</span><span class="w"> </span><span class="err">make</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">o</span><span class="kc">f</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="kc">ne</span><span class="err">wly</span><span class="w"> </span><span class="err">discovered</span><span class="w"> </span><span class="err">wormhole</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="err">surpass</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">limi</span><span class="kc">tat</span><span class="err">io</span><span class="kc">ns</span><span class="w"> </span><span class="err">o</span><span class="kc">n</span><span class="w"> </span><span class="err">huma</span><span class="kc">n</span><span class="w"> </span><span class="err">space</span><span class="w"> </span><span class="kc">tra</span><span class="err">vel</span><span class="w"> </span><span class="err">a</span><span class="kc">n</span><span class="err">d</span><span class="w"> </span><span class="err">co</span><span class="kc">n</span><span class="err">quer</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">vas</span><span class="kc">t</span><span class="w"> </span><span class="err">dis</span><span class="kc">tan</span><span class="err">ces</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="err">volved</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="err">a</span><span class="kc">n</span><span class="w"> </span><span class="err">i</span><span class="kc">nterstellar</span><span class="w"> </span><span class="err">voyage.&#39;</span><span class="p">},</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="err">&#39;</span><span class="kc">t</span><span class="err">i</span><span class="kc">tle</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;I</span><span class="kc">nterstellar</span><span class="err">&#39;</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="err">&#39;</span><span class="kc">t</span><span class="err">i</span><span class="kc">tle</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;S&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;I</span><span class="kc">nterstellar</span><span class="err">&#39;</span><span class="p">},</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="err">&#39;plo</span><span class="kc">t</span><span class="err">&#39;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;S&#39;</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;A</span><span class="w"> </span><span class="err">group</span><span class="w"> </span><span class="err">o</span><span class="kc">f</span><span class="w"> </span><span class="err">explorers</span><span class="w"> </span><span class="err">make</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">o</span><span class="kc">f</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="kc">ne</span><span class="err">wly</span><span class="w"> </span><span class="err">discovered</span><span class="w"> </span><span class="err">wormhole</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="err">surpass</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">limi</span><span class="kc">tat</span><span class="err">io</span><span class="kc">ns</span><span class="w"> </span><span class="err">o</span><span class="kc">n</span><span class="w"> </span><span class="err">huma</span><span class="kc">n</span><span class="w"> </span><span class="err">space</span><span class="w"> </span><span class="kc">tra</span><span class="err">vel</span><span class="w"> </span><span class="err">a</span><span class="kc">n</span><span class="err">d</span><span class="w"> </span><span class="err">co</span><span class="kc">n</span><span class="err">quer</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">vas</span><span class="kc">t</span><span class="w"> </span><span class="err">dis</span><span class="kc">tan</span><span class="err">ces</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="err">volved</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="err">a</span><span class="kc">n</span><span class="w"> </span><span class="err">i</span><span class="kc">nterstellar</span><span class="w"> </span><span class="err">voyage.&#39;</span><span class="p">}</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="varios-documentos">Varios documentos<a class="headerlink" href="#varios-documentos" title="Permanent link">&para;</a></h3>
<p>Si en vez de recuperar un documento, necesitamos recuperar varios y utilizamos la clave o parte de ellos, deberemos emplear el método <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/table/query.html"><code>query</code></a>, el cual siempre devuelve un conjunto de resultados el cual deberemos recorrer:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Películas de 2016 mediante <code>query</code></label><label for="__tabbed_4_2">Películas cuyo título esté entre la A y la L</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">from</span> <span class="nn">boto3.dynamodb.conditions</span> <span class="kn">import</span> <span class="n">Key</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1"># Mediante query</span>
<span class="linenos" data-linenos=" 5 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 6 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 7 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----Películas de 2016&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos=" 8 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">tabla</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">KeyConditionExpression</span><span class="o">=</span><span class="n">Key</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">2016</span><span class="p">))</span>
</span><span class="linenos" data-linenos=" 9 "></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="10 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="c1"># Mediante PartiQL</span>
<span class="linenos" data-linenos="13 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----Películas de 2016 con PartiQL&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="14 "></span><span class="n">clientDDB</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos="15 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">clientDDB</span><span class="o">.</span><span class="n">execute_statement</span><span class="p">(</span>
</span><span class="linenos" data-linenos="16 "></span>    <span class="n">Statement</span><span class="o">=</span><span class="s2">&quot;SELECT title, year FROM SeveroPeliculas WHERE year = 2016&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="17 "></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="18 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">][</span><span class="s1">&#39;S&#39;</span><span class="p">])</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">json</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">import</span> <span class="nn">decimal</span>
<span class="linenos" data-linenos=" 4 "></span><span class="kn">from</span> <span class="nn">boto3.dynamodb.conditions</span> <span class="kn">import</span> <span class="n">Key</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">class</span> <span class="nc">DecimalEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">):</span>
<span class="linenos" data-linenos=" 9 "></span>            <span class="k">if</span> <span class="n">o</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos" data-linenos="10 "></span>                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="12 "></span>                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="linenos" data-linenos="13 "></span>        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">DecimalEncoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="n">anyo</span> <span class="o">=</span> <span class="mi">2016</span>
<span class="linenos" data-linenos="16 "></span><span class="n">letraInicial</span> <span class="o">=</span> <span class="s2">&quot;A&quot;</span>
<span class="linenos" data-linenos="17 "></span><span class="n">letraFinal</span> <span class="o">=</span> <span class="s2">&quot;F&quot;</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="20 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----Películas de 2016 cuyo título empieza desde A hasta L&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos="23 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">tabla</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span class="hll"><span class="linenos" data-linenos="24 "></span>    <span class="n">ProjectionExpression</span><span class="o">=</span><span class="s2">&quot;#yr, title, info.genres, info.actors[0]&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos" data-linenos="25 "></span>    <span class="c1"># year es una palabra clave, por tanto necesitamos crear un alias</span>
</span><span class="hll"><span class="linenos" data-linenos="26 "></span>    <span class="n">ExpressionAttributeNames</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;#yr&quot;</span><span class="p">:</span> <span class="s2">&quot;year&quot;</span><span class="p">},</span>
</span><span class="hll"><span class="linenos" data-linenos="27 "></span>    <span class="n">KeyConditionExpression</span><span class="o">=</span><span class="n">Key</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">anyo</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Key</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">letraInicial</span><span class="p">,</span> <span class="n">letraFinal</span><span class="p">)</span> <span class="p">)</span>
</span><span class="linenos" data-linenos="28 "></span>
<span class="linenos" data-linenos="29 "></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="30 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos" data-linenos="31 "></span>    <span class="c1"># {&#39;info&#39;: {&#39;actors&#39;: [&#39;Zoe Saldana&#39;], &#39;genres&#39;: [&#39;Action&#39;, &#39;Adventure&#39;, &#39;Fantasy&#39;, &#39;Sci-Fi&#39;]}, &#39;year&#39;: Decimal(&#39;2016&#39;), &#39;title&#39;: &#39;Avatar 2&#39;}</span>
<span class="linenos" data-linenos="32 "></span>    <span class="c1"># Transforma los valores numéricos de Decimal a Number</span>
<span class="linenos" data-linenos="33 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">DecimalEncoder</span><span class="p">))</span>
<span class="linenos" data-linenos="34 "></span>    <span class="c1"># {&quot;info&quot;: {&quot;actors&quot;: [&quot;Zoe Saldana&quot;], &quot;genres&quot;: [&quot;Action&quot;, &quot;Adventure&quot;, &quot;Fantasy&quot;, &quot;Sci-Fi&quot;]}, &quot;year&quot;: 2016, &quot;title&quot;: &quot;Avatar 2&quot;}</span>
<span class="linenos" data-linenos="35 "></span>    <span class="k">for</span> <span class="n">genero</span> <span class="ow">in</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;info&#39;</span><span class="p">][</span><span class="s1">&#39;genres&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="36 "></span>        <span class="nb">print</span><span class="p">(</span><span class="n">genero</span><span class="p">)</span>
<span class="linenos" data-linenos="37 "></span>
<span class="linenos" data-linenos="38 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----Películas de 2016 cuyo título empieza desde A hasta L con PartiQL&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="39 "></span><span class="n">clientDDB</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="40 "></span><span class="n">consulta</span> <span class="o">=</span> <span class="s1">&#39;SELECT year, title, info.genres, info.actors[0] FROM SeveroPeliculas WHERE year = ? AND title between ? and ?&#39;</span>
<span class="hll"><span class="linenos" data-linenos="41 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">clientDDB</span><span class="o">.</span><span class="n">execute_statement</span><span class="p">(</span><span class="n">Statement</span><span class="o">=</span><span class="n">consulta</span><span class="p">,</span>
</span><span class="hll"><span class="linenos" data-linenos="42 "></span>                                <span class="n">Parameters</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">anyo</span><span class="p">)},</span> <span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">letraInicial</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">letraFinal</span><span class="p">}])</span>
</span><span class="linenos" data-linenos="43 "></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="44 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos" data-linenos="45 "></span>    <span class="c1"># [{&#39;year&#39;: {&#39;N&#39;: &#39;2016&#39;}, &#39;title&#39;: {&#39;S&#39;: &#39;Avatar 2&#39;}, &#39;actors[0]&#39;: {&#39;S&#39;: &#39;Zoe Saldana&#39;}, &#39;genres&#39;: {&#39;L&#39;: [{&#39;S&#39;: &#39;Action&#39;}, {&#39;S&#39;: &#39;Adventure&#39;}, {&#39;S&#39;: &#39;Fantasy&#39;}, {&#39;S&#39;: &#39;Sci-Fi&#39;}]}}]</span>
<span class="linenos" data-linenos="46 "></span>    <span class="k">for</span> <span class="n">genero</span> <span class="ow">in</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="47 "></span>        <span class="nb">print</span><span class="p">(</span><span class="n">genero</span><span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
</div>
<p>La clase <code>DecimalEncoder</code> se utiliza para transformar los campos <code>Decimal</code> que utiliza <em>DynamoDB</em> para almacenar contenido numérico a tipo entero o flotante según necesite.</p>
<h3 id="full-scan">Full scan<a class="headerlink" href="#full-scan" title="Permanent link">&para;</a></h3>
<p>Cuando en <em>PartiQL</em> no le indicamos en la condición una expresión que busque por una de las claves, se realizará un <em>full scan</em> sobre toda la tabla, lo que puede implicar unos costes inesperados, tanto económicos como a nivel rendimiento. Es por ello, que en la medida de la posible, siempre debemos intentar recuperar los documentos por la clave (o una parte de ella).</p>
<p>El método <code>scan</code> lee cada elemento de la tabla y devuelve todos los datos de la tabla. Se le puede pasar una <code>FilterExpression</code> opcional para que sólo devuelva los elementos que cumplan el criterio. Sin embargo, el filtrado se aplica tras escanear toda la tabla.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Ejemplo scan</label><label for="__tabbed_5_2">Full scan con PartiQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">json</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">import</span> <span class="nn">decimal</span>
<span class="linenos" data-linenos=" 4 "></span><span class="kn">from</span> <span class="nn">boto3.dynamodb.conditions</span> <span class="kn">import</span> <span class="n">Key</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">class</span> <span class="nc">DecimalEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">):</span>
<span class="linenos" data-linenos=" 9 "></span>            <span class="k">if</span> <span class="n">o</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos" data-linenos="10 "></span>                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="12 "></span>                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="linenos" data-linenos="13 "></span>        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">DecimalEncoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----Películas de sobresaliente mediante full scan&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="19 "></span><span class="c1"># Escaneo y filtrado</span>
<span class="linenos" data-linenos="20 "></span><span class="n">fe</span> <span class="o">=</span> <span class="n">Key</span><span class="p">(</span><span class="s1">&#39;info.rating&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="linenos" data-linenos="21 "></span><span class="n">pe</span> <span class="o">=</span> <span class="s2">&quot;#yr, title, info.rating&quot;</span>
<span class="linenos" data-linenos="22 "></span><span class="n">ean</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;#yr&quot;</span><span class="p">:</span> <span class="s2">&quot;year&quot;</span><span class="p">}</span>
<span class="hll"><span class="linenos" data-linenos="23 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">tabla</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span>
</span><span class="hll"><span class="linenos" data-linenos="24 "></span>    <span class="n">FilterExpression</span><span class="o">=</span><span class="n">fe</span><span class="p">,</span>
</span><span class="hll"><span class="linenos" data-linenos="25 "></span>    <span class="n">ProjectionExpression</span><span class="o">=</span><span class="n">pe</span><span class="p">,</span>
</span><span class="hll"><span class="linenos" data-linenos="26 "></span>    <span class="n">ExpressionAttributeNames</span><span class="o">=</span><span class="n">ean</span><span class="p">)</span>
</span><span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="29 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">DecimalEncoder</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos="2 "></span><span class="kn">from</span> <span class="nn">boto3.dynamodb.conditions</span> <span class="kn">import</span> <span class="n">Key</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----Películas de 2016 con PartiQL&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="5 "></span><span class="n">clientDDB</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos="6 "></span><span class="n">resp</span> <span class="o">=</span> <span class="n">clientDDB</span><span class="o">.</span><span class="n">execute_statement</span><span class="p">(</span>
</span><span class="hll"><span class="linenos" data-linenos="7 "></span>    <span class="n">Statement</span><span class="o">=</span><span class="s2">&quot;SELECT title, year, info.rating FROM SeveroPeliculas WHERE info.rating &gt;= 9&quot;</span><span class="p">)</span>
</span><span class="linenos" data-linenos="8 "></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]:</span>
<span class="linenos" data-linenos="9 "></span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">][</span><span class="s1">&#39;S&#39;</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
</div>
<p>Al realizar un <em>full scan</em> es recomendable utilizar el parámetro <code>Limit</code> para limitar la cantidad de documentos devueltos y tener en cuenta la <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Scan.html#Scan.Pagination">paginación</a> (por defecto está configurada a 1 MB) para reducir la cantidad de datos que devuelve la consulta.</p>
<h3 id="consultas-mediante-el-cli">Consultas mediante el CLI<a class="headerlink" href="#consultas-mediante-el-cli" title="Permanent link">&para;</a></h3>
<p>Si queremos hacer consultas mediante AWS CLI y PartiQL, es tan sencillo como ejecutar el comando <a href="https://docs.aws.amazon.com/cli/latest/reference/dynamodb/execute-statement.html"><code>dynamodb execute-statement</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>aws<span class="w"> </span>dynamodb<span class="w"> </span>execute-statement<span class="w"> </span>--statement<span class="w"> </span><span class="s2">&quot;SELECT * FROM SeveroPeliculas&quot;</span>
</code></pre></div>
<p>Y obtenemos los datos:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="nt">&quot;Items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">        </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">            </span><span class="nt">&quot;year&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">                </span><span class="nt">&quot;N&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1933&quot;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">            </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">                </span><span class="nt">&quot;M&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">                    </span><span class="nt">&quot;actors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="w">                        </span><span class="nt">&quot;L&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos="11 "></span><span class="w">                            </span><span class="p">{</span>
<span class="linenos" data-linenos="12 "></span><span class="w">                                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Fay Wray&quot;</span>
<span class="linenos" data-linenos="13 "></span><span class="w">                            </span><span class="p">},</span>
<span class="linenos" data-linenos="14 "></span><span class="w">                            </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span><span class="w">                                </span><span class="nt">&quot;S&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Robert Armstrong&quot;</span>
<span class="linenos" data-linenos="16 "></span><span class="w">                            </span><span class="p">},</span>
<span class="linenos" data-linenos="17 "></span><span class="w">                            </span><span class="err">...</span>
<span class="linenos" data-linenos="18 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="caso-de-uso-3-de-s3-a-dynamodb">Caso de uso 3 - De S3 a DynamoDB<a class="headerlink" href="#caso-de-uso-3-de-s3-a-dynamodb" title="Permanent link">&para;</a></h2>
<p>En la sesión de S3 trabajamos con Python con un dataset de películas, el cual filtramos mediante <a href="s3.html#s3-select">S3Select</a> y nos quedamos con el título, la nota media y la trama siempre y cuando hayan recibido al menos 10.000 votos, el cual almacenamos en <a href="resources/TMDb_filtered.csv"><code>TMDb_filtered.csv</code></a>.</p>
<p>Una vez creado el fichero en S3, vamos cargar los datos en DynamoDB haciendo uso de una operación <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/table/batch_writer.html"><code>batch_writer</code></a> que acelera las inserciones al realizarlas por lotes. Como el dataset no contenía la fecha de la película, en nuestro caso le vamos a poner a todas las películas que son del 2023:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1"># 1.- Leemos el fichero desde S3 y lo metemos en un DataFrame</span>
<span class="linenos" data-linenos=" 6 "></span><span class="n">s3c</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;s3&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 7 "></span><span class="n">bucketNombre</span> <span class="o">=</span> <span class="s2">&quot;s3severo8a-boto3&quot;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="n">ficheroNombre</span> <span class="o">=</span> <span class="s2">&quot;TMDb_filtered.csv&quot;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="n">response</span> <span class="o">=</span> <span class="n">s3c</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="n">bucketNombre</span><span class="p">,</span> <span class="n">Key</span><span class="o">=</span><span class="n">ficheroNombre</span><span class="p">)</span>
<span class="linenos" data-linenos="10 "></span><span class="n">movies_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;Body&#39;</span><span class="p">],</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="c1"># 2.- Nos conectamos a DynamoDB</span>
<span class="linenos" data-linenos="13 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="14 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroPeliculas&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="c1"># 3.- Lo metemos en DynamoDB mediante un batch</span>
<span class="hll"><span class="linenos" data-linenos="17 "></span><span class="k">with</span> <span class="n">tabla</span><span class="o">.</span><span class="n">batch_writer</span><span class="p">()</span> <span class="k">as</span> <span class="n">batch</span><span class="p">:</span>
</span><span class="linenos" data-linenos="18 "></span>    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">fila</span> <span class="ow">in</span> <span class="n">movies_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<span class="linenos" data-linenos="19 "></span>        <span class="n">Item</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos" data-linenos="20 "></span>            <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2022</span><span class="p">,</span>
<span class="linenos" data-linenos="21 "></span>            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">fila</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]),</span>
<span class="linenos" data-linenos="22 "></span>            <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos" data-linenos="23 "></span>                <span class="s1">&#39;plot&#39;</span> <span class="p">:</span> <span class="n">fila</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">],</span>
<span class="linenos" data-linenos="24 "></span>                <span class="s1">&#39;rating&#39;</span> <span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">fila</span><span class="p">[</span><span class="s1">&#39;vote_average&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">quantize</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.00&#39;</span><span class="p">))</span>
<span class="linenos" data-linenos="25 "></span>            <span class="p">}</span>
<span class="linenos" data-linenos="26 "></span>        <span class="p">}</span>
<span class="hll"><span class="linenos" data-linenos="27 "></span>        <span class="n">batch</span><span class="o">.</span><span class="n">put_item</span><span class="p">(</span><span class="n">Item</span><span class="o">=</span><span class="n">Item</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="caso-de-uso-4-desde-rds">Caso de uso 4 - Desde RDS<a class="headerlink" href="#caso-de-uso-4-desde-rds" title="Permanent link">&para;</a></h2>
<div class="admonition inline end tip">
<p class="admonition-title">Preparación MariaBD</p>
<p>Si todavía no tienes preparada la base de datos (<em>retail_db</em>) consulta la forma de crearla en la <a href="rds.html#retail_db">segunda actividad de la sesión de RDS</a>.</p>
</div>
<p>Vamos a utilizar la instancia de base de datos <code>instituto</code> que tenemos en RDS con la base de datos <code>retail_db</code>.</p>
<h3 id="mariadbmysql-y-python">MariaDB/MySQL y Python<a class="headerlink" href="#mariadbmysql-y-python" title="Permanent link">&para;</a></h3>
<p>Para acceder a la base de datos desde Python necesitamos instalar la librería correspondiente:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>pip3<span class="w"> </span>install<span class="w"> </span>mariadb
<span class="linenos" data-linenos="2 "></span>pip3<span class="w"> </span>install<span class="w"> </span>mysql-connector-python
</code></pre></div>
<p>Todo el código a continuación se basa en <em>MariaDB</em> como sistema gestor de base de datos. Si queremos conectarnos, debemos indicar los datos de conexión:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">mariadb</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">try</span><span class="p">:</span>
<span class="hll"><span class="linenos" data-linenos=" 5 "></span>    <span class="n">conn</span> <span class="o">=</span> <span class="n">mariadb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
</span><span class="linenos" data-linenos=" 6 "></span>        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;adminadmin&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;iabd.cllw9xnmy9av.us-east-1.rds.amazonaws.com&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="n">port</span><span class="o">=</span><span class="mi">3306</span><span class="p">,</span>
<span class="linenos" data-linenos="10 "></span>        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;retail_db&quot;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="12 "></span><span class="k">except</span> <span class="n">mariadb</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos" data-linenos="13 "></span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error conectando a MariaD: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="14 "></span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="c1"># Obtenemos el cursor</span>
<span class="linenos" data-linenos="17 "></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</code></pre></div>
<p>Una vez nos hemos conectado y tenemos abierto un cursor, ya podemos hacer consultas y recuperar datos.</p>
<p>Por ejemplo, para recuperar toda la información de los clientes almacenada en la tabla <code>customers</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;select * from customers&quot;</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
</span><span class="hll"><span class="linenos" data-linenos=" 3 "></span><span class="n">resultado</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchAll</span><span class="p">()</span>
</span><span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1"># Cerramos el cursor y la conexión</span>
<span class="linenos" data-linenos=" 6 "></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos" data-linenos=" 7 "></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1"># Mostramos el resultado</span>
<span class="linenos" data-linenos="10 "></span><span class="nb">print</span><span class="p">(</span><span class="n">resultado</span><span class="p">)</span>
</code></pre></div>
<h3 id="de-rds-a-s3">De RDS a S3<a class="headerlink" href="#de-rds-a-s3" title="Permanent link">&para;</a></h3>
<p>Vamos a realizar otro ejemplo sencillo que recupere el nombre, apellido y email de los clientes mediante una consulta que recibe un parámetro:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">mariadb</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">import</span> <span class="nn">json</span>
<span class="linenos" data-linenos=" 4 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">try</span><span class="p">:</span>
<span class="hll"><span class="linenos" data-linenos=" 7 "></span>    <span class="n">conn</span> <span class="o">=</span> <span class="n">mariadb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
</span><span class="linenos" data-linenos=" 8 "></span>        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;adminadmin&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="10 "></span>        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;iabd.cllw9xnmy9av.us-east-1.rds.amazonaws.com&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="11 "></span>        <span class="n">port</span><span class="o">=</span><span class="mi">3306</span><span class="p">,</span>
<span class="linenos" data-linenos="12 "></span>        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;retail_db&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="13 "></span><span class="k">except</span> <span class="n">mariadb</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos" data-linenos="14 "></span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error conectando a MariaDB: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span><span class="n">ciudad</span> <span class="o">=</span> <span class="s2">&quot;Brownsville&quot;</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="c1"># Obtenemos el cursor</span>
<span class="linenos" data-linenos="20 "></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="linenos" data-linenos="21 "></span><span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;select customer_fname, customer_lname, customer_zipcode from customers where customer_city=?&quot;</span>
<span class="hll"><span class="linenos" data-linenos="22 "></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span><span class="n">ciudad</span><span class="p">,</span> <span class="p">))</span>
</span><span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span><span class="c1"># Generamos un JSON con los datos</span>
<span class="linenos" data-linenos="25 "></span><span class="n">row_headers</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">description</span><span class="p">]</span> 
<span class="hll"><span class="linenos" data-linenos="26 "></span><span class="n">clientes</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span class="linenos" data-linenos="27 "></span><span class="n">json_data</span><span class="o">=</span><span class="p">[]</span>
<span class="linenos" data-linenos="28 "></span><span class="k">for</span> <span class="n">cliente</span> <span class="ow">in</span> <span class="n">clientes</span><span class="p">:</span>
<span class="linenos" data-linenos="29 "></span>    <span class="n">json_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">row_headers</span><span class="p">,</span><span class="n">cliente</span><span class="p">)))</span>
<span class="linenos" data-linenos="30 "></span>
<span class="linenos" data-linenos="31 "></span><span class="c1"># Cerramos el cursor y la conexión</span>
<span class="linenos" data-linenos="32 "></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos" data-linenos="33 "></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos" data-linenos="34 "></span>
<span class="linenos" data-linenos="35 "></span><span class="c1"># Persistimos el JSON en S3</span>
<span class="linenos" data-linenos="36 "></span><span class="n">s3r</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;s3&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="37 "></span><span class="nb">object</span> <span class="o">=</span> <span class="n">s3r</span><span class="o">.</span><span class="n">Object</span><span class="p">(</span><span class="s1">&#39;s3severo8a-boto3&#39;</span><span class="p">,</span> <span class="s1">&#39;clientesRDS.json&#39;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos="38 "></span><span class="nb">object</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">Body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_data</span><span class="p">))</span>
</span></code></pre></div>
<h3 id="de-rds-a-dynamodb">De RDS a DynamoDB<a class="headerlink" href="#de-rds-a-dynamodb" title="Permanent link">&para;</a></h3>
<p>Para este caso de uso, vamos a crear una nueva tabla en DynamoDB a la que llamaremos <code>SeveroClientes</code> y le pondremos como clave de particionado el campo <code>Id</code> de tipo numérico y como clave de ordenamiento el <code>Zip</code> de tipo texto.</p>
<figure style="align: center;">
    <img src="images/06ddSeveroClientes.png">
    <figcaption>Creación de la tabla SeveroClientes</figcaption>
</figure>

<p>Vamos a modificar el ejemplo anterior para que, una vez recuperado los datos de la base de datos, los almacene directamente en DynamoDB:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">import</span> <span class="nn">mariadb</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">try</span><span class="p">:</span>
<span class="hll"><span class="linenos" data-linenos=" 6 "></span>    <span class="n">conn</span> <span class="o">=</span> <span class="n">mariadb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
</span><span class="linenos" data-linenos=" 7 "></span>        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;adminadmin&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;iabd.cllw9xnmy9av.us-east-1.rds.amazonaws.com&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="10 "></span>        <span class="n">port</span><span class="o">=</span><span class="mi">3306</span><span class="p">,</span>
<span class="linenos" data-linenos="11 "></span>        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;retail_db&quot;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="13 "></span><span class="k">except</span> <span class="n">mariadb</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos" data-linenos="14 "></span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error conectando a MariaDB: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span><span class="n">ciudad</span> <span class="o">=</span> <span class="s2">&quot;Brownsville&quot;</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="c1"># Obtenemos el cursor</span>
<span class="linenos" data-linenos="20 "></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="linenos" data-linenos="21 "></span><span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;select customer_id, customer_fname, customer_lname, customer_zipcode from customers where customer_city=?&quot;</span>
<span class="hll"><span class="linenos" data-linenos="22 "></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span><span class="n">ciudad</span><span class="p">,</span> <span class="p">))</span>
</span><span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span><span class="c1"># Recorremos el cursor e insertamos en DynamoDB</span>
<span class="linenos" data-linenos="25 "></span><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="26 "></span><span class="n">tabla</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;SeveroClientes&#39;</span><span class="p">)</span>
<span class="hll"><span class="linenos" data-linenos="27 "></span><span class="k">with</span> <span class="n">tabla</span><span class="o">.</span><span class="n">batch_writer</span><span class="p">()</span> <span class="k">as</span> <span class="n">batch</span><span class="p">:</span>
</span><span class="linenos" data-linenos="28 "></span>    <span class="k">for</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">customer_fname</span><span class="p">,</span> <span class="n">customer_lname</span><span class="p">,</span> <span class="n">customer_zipcode</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span> 
<span class="linenos" data-linenos="29 "></span>        <span class="n">Item</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos" data-linenos="30 "></span>            <span class="s1">&#39;Id&#39;</span><span class="p">:</span> <span class="n">customer_id</span><span class="p">,</span>
<span class="linenos" data-linenos="31 "></span>            <span class="s1">&#39;Zip&#39;</span><span class="p">:</span> <span class="n">customer_zipcode</span><span class="p">,</span>
<span class="linenos" data-linenos="32 "></span>            <span class="s1">&#39;Nombre&#39;</span><span class="p">:</span> <span class="n">customer_fname</span><span class="p">,</span>
<span class="linenos" data-linenos="33 "></span>            <span class="s1">&#39;Apellidos&#39;</span><span class="p">:</span> <span class="n">customer_lname</span><span class="p">,</span>
<span class="linenos" data-linenos="34 "></span>        <span class="p">}</span>
<span class="hll"><span class="linenos" data-linenos="35 "></span>    <span class="n">batch</span><span class="o">.</span><span class="n">put_item</span><span class="p">(</span><span class="n">Item</span><span class="o">=</span><span class="n">Item</span><span class="p">)</span>
</span><span class="linenos" data-linenos="36 "></span>
<span class="linenos" data-linenos="37 "></span><span class="c1"># Cerramos el cursor y la conexión</span>
<span class="linenos" data-linenos="38 "></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos" data-linenos="39 "></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Bases de datos y Pandas</p>
<p>Si estás interesado en colocar dentro de <em>Pandas</em> los datos que recuperas desde una base de datos, es muy común utilizar <a href="https://www.sqlalchemy.org/">SQLAlchemy</a> el cual ofrece una capa por encima de los <em>drivers</em> (además de ofrecer un framework ORM).</p>
<p>Un fragmento de código que utiliza <em>Pandas</em> y <em>SQLAlchemy</em> sería similar a:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="linenos" data-linenos="2 "></span><span class="kn">import</span> <span class="nn">pymysql</span>
<span class="linenos" data-linenos="3 "></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="n">sqlEngine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;mysql+pymysql://iabd:@127.0.0.1&#39;</span><span class="p">,</span> <span class="n">pool_recycle</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
<span class="linenos" data-linenos="6 "></span><span class="n">dbConnection</span> <span class="o">=</span> <span class="n">sqlEngine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="linenos" data-linenos="7 "></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;select * from retail_db.customers&quot;</span><span class="p">,</span> <span class="n">dbConnection</span><span class="p">);</span>
</code></pre></div>
</div>
<h2 id="referencias">Referencias<a class="headerlink" href="#referencias" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.aws.amazon.com/es_es/amazondynamodb/latest/developerguide/Introduction.html">Guía de referencias de Amazon DynamoDB</a></li>
<li><a href="https://amazon-dynamodb-labs.com/index.html">Laboratorios con ejemplos y modelado con Amazon DynamoDB</a></li>
<li><a href="https://highlandsolutions.com/blog/hands-on-examples-for-working-with-dynamodb-boto3-and-python">DynamoDB mediante Python</a></li>
<li><a href="https://www.fernandomc.com/posts/ten-examples-of-getting-data-from-dynamodb-with-python-and-boto3/">Ten Examples of Getting Data from DynamoDB with Python and Boto3</a></li>
<li><a href="https://medium.com/skyline-ai/dynamodb-insert-performance-basics-in-python-boto3-5bc01919c79f">DynamoDB Insert: Performance Basics in Python/Boto3</a></li>
</ul>
<!--
TODO: Curso DynamoDB desde AWS: https://www.aws.training/Details/Curriculum?id=65583&redirect=false
Crear función Lambda que monitorize S3 e inserte en DynamoDB
-->

<h2 id="actividades">Actividades<a class="headerlink" href="#actividades" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>(<abbr title="Gestiona sistemas de almacenamiento y el amplio ecosistema alrededor de ellos facilitando el procesamiento de grandes cantidades de datos sin fallos y de forma rápida.">RABDA.2</abbr> / <abbr title="Se ha determinado la importancia de los sistemas de almacenamiento para depositar y procesar grandes cantidades de cualquier tipo de datos rápidamente.">CEBDA.2a</abbr> / 0.5p) Siguiendo el ejemplo de <em>Hola DynamoDB</em>, crea la tabla (<code>ProductCatalog</code>), cárgala con los datos del ejemplo y realiza un consulta para obtener las bicicletas híbridas. Exporta el resultado a CSV.</p>
</li>
<li>
<p>(<abbr title="Gestiona sistemas de almacenamiento y el amplio ecosistema alrededor de ellos facilitando el procesamiento de grandes cantidades de datos sin fallos y de forma rápida.">RABDA.2</abbr> / <abbr title="Se ha determinado la importancia de los sistemas de almacenamiento para depositar y procesar grandes cantidades de cualquier tipo de datos rápidamente.">CEBDA.2a</abbr> / 1.5p) Mediante <em>Python</em> y utilizando la base de datos de <code>retail_db</code>:</p>
<ol>
<li>Exporta los datos de la tabla <code>products</code> y cargarla en S3 (en un <em>bucket</em> que contenga tus iniciales en el nombre del <em>bucket</em>), de forma similar al caso de uso 4.</li>
<li>Desde el archivo en S3, carga los datos en <em>DynamoDB</em> de forma similar al caso de uso 3.</li>
<li>Recupera el producto 1 (por su clave) y muestra sus datos. </li>
<li>Modifica el producto 1 y ponle un precio de 99€.</li>
<li>Realiza una consulta que obtenga todos los productos de menos de 100€.</li>
</ol>
</li>
</ol>
<!--
DynamoDB is a NoSQL database service that removes all the operational burdens from you, scales well, and can be used in many ways as the storage backend of your applications.

Looking up data in DynamoDB is based on keys. To query an item, you need to know the primary key, called the partition key.

When using a combination of partition key and sort key, many items can use the same partition key as long as their sort key does not overlap. This approach also allows you to query all items with the same partition key, ordered by the sort key.

Adding a global secondary index allows you to query efficiently on an additional attribute.

The query operation queries a table or secondary indexes.

The scan operation searches through all items of a table, which is flexible but not efficient and shouldn’t be used too extensively.

Enforcing strongly consistent reads avoids running into eventual consistency problems with stale data. But reading from a global secondary index is always eventually consistent.

DynamoDB comes with two capacity modes: on demand and provisioned. The on-demand capacity mode works best for spiky workloads.
-->







  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        <a href='https://ko-fi.com/T6T8GWT9N' title='Invítame a un café en ko-fi.com' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi2.png?v=3' border='0' alt='Invítame a un café en ko-fi.com' /></a>
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="Me encantan estos apuntes" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="Los apuntes son mejorables" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Gracias por tu tiempo. Si quieres me puedes <a href='https://ko-fi.com/T6T8GWT9N'>invitar a un café en ko-fi</a>.
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              ¡Gracias por tu colaboración! Ayúdame a mejorar los apuntes enviándome un mail a <a href="mailto:a.medrano@edu.gva.es">a.medrano@edu.gva.es</a> con tus comentarios.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie" >
        
          
          <a href="rds.html" class="md-footer__link md-footer__link--prev" aria-label="Anterior: RDS">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                RDS
              </div>
            </div>
          </a>
        
        
          
          <a href="waf.html" class="md-footer__link md-footer__link--next" aria-label="Siguiente: WAF">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Siguiente
              </span>
              <div class="md-ellipsis">
                WAF
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2023-2024 Aitor Medrano - <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.es">Licencia CC BY-NC-SA</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://aitor-medrano.github.io/" target="_blank" rel="noopener" title="aitor-medrano.github.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/aitormedrano" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<a.medrano@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48H48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0L0 176z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Consentimiento de cookie</h4>
<p>Esta página de apuntes utiliza cookies para reconocer las visitas, medir la efectividad de la documentación y averiguar si encuentras aquello que buscas o cómo has llegado a estos apuntes. Con tu consentimiento, me ayudas a mejorar estos materiales.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Aceptar</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestionar cookies</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "navigation.top", "navigation.tracking", "navigation.footer", "navigation.indexes", "content.code.annotate", "announce.dismiss", "toc.follow", "content.code.copy"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>